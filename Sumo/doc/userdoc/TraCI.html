<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta property="og:image" content="images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/TraCI.html">
        <link rel="shortcut icon" href="images/favicon.ico">
        <title>TraCI - SUMO Documentation</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 

      <script>
        // DARK MODE
        function detectColorScheme(){
          var theme="light";

          if(localStorage.getItem("sumo-docs-theme")){
              if(localStorage.getItem("sumo-docs-theme") == "dark"){
                  var theme = "dark";
              }
          } else if(!window.matchMedia) {
              return false;
          } else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
              var theme = "dark";
          }

          if (theme=="dark") {
              document.documentElement.setAttribute("data-theme", "dark");
          }
        }
        detectColorScheme();
      </script>

    </head>

    <body>

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">
                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="index.html" class="nav-link">Documentation</a>
                            </li>
                            <li class="navitem">
                                <a href="Tutorials/index.html" class="nav-link">Tutorials</a>
                            </li>
                            <li class="navitem">
                                <a href="FAQ.html" class="nav-link">FAQ</a>
                            </li>
                            <li class="navitem">
                                <a href="Downloads.html" class="nav-link">Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="Publications.html" class="nav-link">Publications</a>
                            </li>
                            <li class="navitem">
                                <a href="Developer/index.html" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="ChangeLog.html" class="nav-link">ChangeLog</a>
                            </li>
                            <li class="navitem">
                                <a href="https://github.com/eclipse/sumo/commits/master/docs/web" class="nav-link">Recent Changes</a>
                            </li>
                            <li class="navitem">
                                <a href="https://eclipse.org/sumo/contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> <u>S</u>earch
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/eclipse/sumo/edit/master/docs/web/docs/TraCI.md" class="nav-link"><i class="fa fa-github"></i> <u>E</u>dit on GitHub</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            More <i class="fa fa-chevron-circle-down"></i>
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://github.com/eclipse/sumo/issues">Report a Bug / Issue / Typo</a>
                            <a class="dropdown-item" href="Editing_Articles.html">Help on editing articles</a>
                            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#mkdocs_keyboard_modal">Keyboard Shortcuts</a>
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                            <span class="dropdown-item" id="dark-mode-div">Dark mode <label id="theme-switch" class="theme-switch" for="checkbox_theme">
                              <input type="checkbox" id="checkbox_theme">
                          </label></span>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
          <div class="row">
                <div class="col-md-3">
                  <div class="text-center"><a href="index.html" style="display: inline-block; margin-top: 5px;"><img src="images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                  
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll toc">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#introduction_to_traci">Introduction to TraCI</a></li>
            <li class="nav-item main"><a href="#using_traci">Using TraCI</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#sumo_startup" class="nav-link">• SUMO startup</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#multiple_clients" class="nav-link">• Multiple clients</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#protocol_specification" class="nav-link">• Protocol specification</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#traci_commands" class="nav-link">• TraCI Commands</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#shutdown" class="nav-link">• Shutdown</a>
                </li>
            <li class="nav-item main"><a href="#using_sumo_as_a_library">Using SUMO as a library</a></li>
            <li class="nav-item main"><a href="#example_use">Example use</a></li>
            <li class="nav-item main"><a href="#resources">Resources</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#interfaces_by_programming_language" class="nav-link">• Interfaces by Programming Language</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#v2x_simulation" class="nav-link">• V2X simulation</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#other_resources" class="nav-link">• Other Resources</a>
                </li>
            <li class="nav-item main"><a href="#references">References</a></li>
            <li class="nav-item main"><a href="#performance">Performance</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#examples" class="nav-link">• Examples</a>
                </li>
            <li class="nav-item main"><a href="#current_and_future_development">Current and Future Development</a></li>
            <li class="nav-item main"><a href="#troubleshooting">Troubleshooting</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#output_files_are_not_closed" class="nav-link">• Output files are not closed.</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#obsolete_apis" class="nav-link">• Obsolete APIs</a>
                </li>
        </ul>
    </div>

    <div class="admonition conference" style="position: sticky; margin-top: 20px; margin-bottom:10px;">
        <p>visit <a href="https://eclipse.org/sumo">eclipse.org/sumo</a></p>
        </div>

</div>
                  <!--  -->
                </div>
                <div class="col-md-9 main-area" role="main">
                   <!-- page.is_homepage seems to be broken in Mkdocs > 1.1.0 -->
                  <ul class="breadcrumbs">
    <script>
        var pagePath = "/docs/TraCI.html";
        var splitUrl = pagePath.split("/");
        splitUrl.pop();
        splitUrl.shift();
        if (splitUrl[0] == 'docs') splitUrl.shift();
        var homeLink = "index.html";
        document.write('<li class="breadcrumb-item"><a href="' + homeLink + '"><i class="fa fa-home"></i></a></li>');
        var prev = '';
        
        var dirLink = splitUrl.map(function (el) {
        el = prev + el; prev = el + '/'; return el;
        });

        for (i = 0; i < splitUrl.length; i++) {
            document.write("<li class=\"breadcrumb-item\"><a class=\"no-arrow-link\" href=\"" + dirLink[i] + "\">" + splitUrl[i] + "</a></li>");
        }
    </script>
    <li class="breadcrumb-item active">TraCI</li>
</ul>
                  <hTitles>TraCI<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                  
                  

<h2 id="introduction_to_traci">Introduction to TraCI<a class="headerlink" href="#introduction_to_traci" title="Permanent link">#</a></h2>
<p>TraCI is the short term for "<strong>Tra</strong>ffic <strong>C</strong>ontrol <strong>I</strong>nterface".
Giving access to a running road traffic simulation, it allows to
retrieve values of simulated objects and to manipulate their behavior
"on-line".</p>
<h2 id="using_traci">Using TraCI<a class="headerlink" href="#using_traci" title="Permanent link">#</a></h2>
<h3 id="sumo_startup">SUMO startup<a class="headerlink" href="#sumo_startup" title="Permanent link">#</a></h3>
<p>TraCI uses a TCP based client/server architecture to provide access to
<a href="sumo.html">sumo</a>. Thereby, <a href="sumo.html">sumo</a> acts as server
that is started with additional command-line options: <strong>--remote-port</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;INT&gt;</em></a> where <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;INT&gt;</em></a> is the
port <a href="sumo.html">sumo</a> will listen on for incoming connections.</p>
<p>When started with the <strong>--remote-port</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;INT&gt;</em></a> option, <a href="sumo.html">sumo</a> only prepares the
simulation and waits for all external applications to connect and take
over the control. Please note, that the <strong>--end</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;TIME&gt;</em></a> option is ignored when
<a href="sumo.html">sumo</a> runs as a TraCI server, <a href="sumo.html">sumo</a>
runs until the client demands a simulation end.</p>
<p>When using <a href="sumo-gui.html">sumo-gui</a> as a server, the simulation
must either be started by using the <a href="sumo-gui.html#usage_description"><em>play</em>
button</a> or by setting the option <strong>--start</strong>
before TraCI commands will be processed.</p>
<h3 id="multiple_clients">Multiple clients<a class="headerlink" href="#multiple_clients" title="Permanent link">#</a></h3>
<p>The number of clients which can connect can be given as an additional
option <strong>--num-clients</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;INT&gt;</em></a>, where 1 is the default. Please note that in multi client
scenarios you must explicitly specify the execution order of the clients
using the
<a href="TraCI/Control-related_commands.html#command_0x03_setorder"><em>SetOrder</em>-command</a>.</p>
<p>Each client must specify a unique (but otherwise arbitrary) integer value
and the client commands will be handled in the order from the lowest to
the highest value within each simulation step.</p>
<p>The clients are automatically synchronized after every simulation step. This means, the simulation does not advance to the next step until all clients have called the 'simulationStep'' command. Also, the simulationStep command only returns control to the client after the simulation has advanced.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The simulation will only start once all clients have connected. </p>
</div>
<h3 id="protocol_specification">Protocol specification<a class="headerlink" href="#protocol_specification" title="Permanent link">#</a></h3>
<p>Please see the <a href="TraCI/Protocol.html">TraCI Protocol Specification</a>
(including <a href="TraCI/Protocol.html#basic_flow">Basic Flow</a>,
<a href="TraCI/Protocol.html#messages">Messages</a>, <a href="TraCI/Protocol.html#data_types">Data
Types</a>).</p>
<h3 id="traci_commands">TraCI Commands<a class="headerlink" href="#traci_commands" title="Permanent link">#</a></h3>
<ul>
<li><a href="TraCI/Control-related_commands.html">Control-related
  commands</a>: perform a
  simulation step, close the connection, reload the simulation.</li>
</ul>
<p>For the following APIs, the ID is equal to the ID defined in
<a href="sumo.html">sumo</a>'s input files. Here, you find their <a href="TraCI/SUMO_ID_Commands_Structure.html">general
structure</a>.</p>
<ul>
<li>Value Retrieval<ul>
<li><a href="TraCI/Induction_Loop_Value_Retrieval.html">Induction Loop Value
  Retrieval</a>
  retrieve information about induction loops</li>
<li><a href="TraCI/Lane_Area_Detector_Value_Retrieval.html">Lane Area Detector Value
  Retrieval</a>
  retrieve information about lane area detectors</li>
<li><a href="TraCI/Multi-Entry-Exit_Detectors_Value_Retrieval.html">Multi-Entry-Exit Detectors Value
  Retrieval</a>
  retrieve information about multi-entry/multi-exit detectors</li>
<li><a href="TraCI/Calibrator.html">Calibrator Value
  Retrieval</a>
  retrieve information about calibrators</li>
<li><a href="TraCI/Traffic_Lights_Value_Retrieval.html">Traffic Lights Value
  Retrieval</a>
  retrieve information about traffic lights</li>
<li><a href="TraCI/Lane_Value_Retrieval.html">Lane Value Retrieval</a>
  retrieve information about lanes</li>
<li><a href="TraCI/Vehicle_Value_Retrieval.html">Vehicle Value
  Retrieval</a> retrieve
  information about vehicles</li>
<li><a href="TraCI/Person_Value_Retrieval.html">Person Value
  Retrieval</a> retrieve
  information about persons</li>
<li><a href="TraCI/VehicleType_Value_Retrieval.html">Vehicle Type Value
  Retrieval</a>
  retrieve information about vehicle types</li>
<li><a href="TraCI/Route_Value_Retrieval.html">Route Value Retrieval</a>
  retrieve information about routes</li>
<li><a href="TraCI/POI_Value_Retrieval.html">PoI Value Retrieval</a>
  retrieve information about points-of-interest</li>
<li><a href="TraCI/Polygon_Value_Retrieval.html">Polygon Value
  Retrieval</a> retrieve
  information about polygons</li>
<li><a href="TraCI/BusStop.html">BusStop Value
  Retrieval</a>
  retrieve information about BusStops</li>
<li><a href="TraCI/ChargingStation.html">Charging Station Value
  Retrieval</a>
  retrieve information about charging stations</li>
<li><a href="TraCI/ParkingArea.html">Parking Area Value
  Retrieval</a>
  retrieve information about parking areas</li>
<li><a href="TraCI/OverheadWire.html">Overhead Wire Value
  Retrieval</a>
  retrieve information about overhead wires</li>
<li><a href="TraCI/Junction_Value_Retrieval.html">Junction Value
  Retrieval</a> retrieve
  information about junctions</li>
<li><a href="TraCI/Edge_Value_Retrieval.html">Edge Value Retrieval</a>
  retrieve information about edges</li>
<li><a href="TraCI/Simulation_Value_Retrieval.html">Simulation Value
  Retrieval</a> retrieve
  information about the simulation</li>
<li><a href="TraCI/GUI_Value_Retrieval.html">GUI Value Retrieval</a>
  retrieve information about the simulation visualization</li>
<li><a href="TraCI/Rerouter.html">Rerouter</a>
  retrieve information about the rerouter</li>
<li><a href="TraCI/RouteProbe.html">RouteProbe</a>
  retrieve information about the RouteProbe</li>
</ul>
</li>
<li>State Changing<ul>
<li><a href="TraCI/Change_Lane_State.html">Change Lane State</a> change a
  lane's state</li>
<li><a href="TraCI/Change_Traffic_Lights_State.html">Change Traffic Lights
  State</a> change a
  traffic lights' state</li>
<li><a href="TraCI/Change_Vehicle_State.html">Change Vehicle State</a>
  change a vehicle's state</li>
<li><a href="TraCI/Change_Person_State.html">Change Person State</a>
  change a persons state</li>
<li><a href="TraCI/Change_VehicleType_State.html">Change Vehicle Type
  State</a> change a
  vehicle type's state</li>
<li><a href="TraCI/Change_Route_State.html">Change Route State</a> change
  a route's state</li>
<li><a href="TraCI/Change_PoI_State.html">Change PoI State</a> change a
  point-of-interest's state (or add/remove one)</li>
<li><a href="TraCI/Change_Polygon_State.html">Change Polygon State</a>
  change a polygon's state (or add/remove one)</li>
<li><a href="TraCI/Change_Edge_State.html">Change Edge State</a> change
  an edge's state</li>
<li><a href="TraCI/Change_Simulation_State.html">Change Simulation
  State</a> change the
  simulation</li>
<li><a href="TraCI/Change_GUI_State.html">Change GUI State</a> change the
  simulation visualization</li>
</ul>
</li>
<li>Subscriptions<ul>
<li><a href="TraCI/Object_Variable_Subscription.html">TraCI/Object Variable
  Subscription</a></li>
<li><a href="TraCI/Object_Context_Subscription.html">TraCI/Object Context
  Subscription</a></li>
</ul>
</li>
<li>Accessing <a href="TraCI/GenericParameters.html">Generic Parameters</a></li>
</ul>
<h3 id="shutdown">Shutdown<a class="headerlink" href="#shutdown" title="Permanent link">#</a></h3>
<p>When using TraCI, the <strong>--end</strong> option of <a href="sumo.html">sumo</a> is ignored.
Instead the simulation is closed by issuing the <a href="TraCI/Control-related_commands.html#command_0x7f_close"><em>close</em>
command</a>.
To detect whether all route files have been exhausted and all vehicles
have left the simulation, one can check whether the command
<a href="TraCI/Simulation_Value_Retrieval.html">getMinExpectedNumber</a>
returns 0. The simulation will end as soon as all clients have sent the
<em>close</em> command.</p>
<p>It is also possible to reload the simulation with a new list of
arguments by using the
<a href="TraCI/Control-related_commands.html#command_0x01_load"><em>load</em>-command</a>.</p>
<h2 id="using_sumo_as_a_library">Using SUMO as a library<a class="headerlink" href="#using_sumo_as_a_library" title="Permanent link">#</a></h2>
<p>Normally, TraCI is used to couple multiple processes: A SUMO server
process and one or more TraCI client processes. Alternatively,
<a href="Libsumo.html">Libsumo</a> can be used to embed SUMO as a library
into the client process. This allows using the same method signatures as
in the client libraries but avoids the overhead of socket communication.
Libsumo supports generating client libraries using
<a href="https://en.wikipedia.org/wiki/SWIG">SWIG</a> and can therefore be used
with a large number of programming languages. C++, Java and Python
bindings are included when downloading a sumo-build.</p>
<h2 id="example_use">Example use<a class="headerlink" href="#example_use" title="Permanent link">#</a></h2>
<ul>
<li>There is a <a href="Tutorials/TraCI4Traffic_Lights.html">tutorial on using TraCI for adaptive traffic
  lights</a> (using Python).</li>
<li>The <a href="Tutorials/CityMobil.html">Tutorials/CityMobil</a> tutorial
  uses TraCI for assigning new routes to vehicles (using Python).</li>
<li>The
  <a href="Tutorials/TraCIPedCrossing.html">Tutorials/TraCIPedCrossing</a>
  tutorial uses TraCI for building a crossing with a pedestrian
  triggered traffic light.</li>
</ul>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">#</a></h2>
<h3 id="interfaces_by_programming_language">Interfaces by Programming Language<a class="headerlink" href="#interfaces_by_programming_language" title="Permanent link">#</a></h3>
<ul>
<li>Python: <a href="TraCI/Interfacing_TraCI_from_Python.html">the package
  tools/traci</a> allows
  to interact with <a href="sumo.html">sumo</a> using Python (This library
  is tested daily and supports all TraCI commands).</li>
<li>C++: <a href="Libtraci.html">libtraci</a> is a client library that is part of the <a href="sumo.html">sumo</a>-source tree. It is fully API-compatible with <a href="Libsumo.html">libsumo</a>. </li>
<li>C++: <a href="TraCI/C%2B%2BTraCIAPI.html">The C++ TraCIAPI</a> is a client
  library that is part of the <a href="sumo.html">sumo</a>-source tree. (API
  coverage is almost complete but this client is no longer updated. Use libtraci instead)</li>
<li>C++: <a href="http://veins.car2x.org">The Veins project</a> provides a
  middle-ware for coupling <a href="sumo.html">sumo</a> with
  <a href="https://omnetpp.org/">OMNET++</a>. As part of the infrastructure it
  provides a C++ client library for the TraCI API (API completeness is
  a bit behind the python client).</li>
<li>.NET:
  <a href="https://github.com/CodingConnected/CodingConnected.Traci">TraCI.NET</a>
  is a client library with almost complete API coverage.</li>
<li>Matlab
  <a href="http://www.mathworks.com/matlabcentral/fileexchange/44805-traci4matlab">TraCI4Matlab</a>.
  The client is included as part of each SUMO release in
  <strong><em>&lt;SUMO_HOME&gt;</em></strong><em>/tools/contributed/traci4matlab</em>
  Not all TraCI commands have been
  implemented.</li>
<li>Java: <a href="Libtraci.html">libtraci</a> is a client library that is part of the <a href="sumo.html">sumo</a>-source tree. It is fully API-compatible with <a href="Libsumo.html">libsumo</a> and a sumo release provides pro-compiled Java bindings (via SWIG).</li>
<li>Java: <a href="TraCI/TraaS.html#java_client">TraaS</a> provides a client
  library that is part of the <a href="sumo.html">sumo</a>-source tree (API
  coverage is large but this client is no longer updated. Use libtraci instead)</li>
<li>Others: Any language that is supported by SWIG can in principle use the bindings provided by libsumo or libtraci</li>
</ul>
<h3 id="v2x_simulation">V2X simulation<a class="headerlink" href="#v2x_simulation" title="Permanent link">#</a></h3>
<p>TraCI allows to use <a href="sumo.html">sumo</a> in combination with
communication network simulators for simulating <a href="Topics/V2X.html">vehicular
communication</a>. See
<a href="Topics/V2X.html">Topics/V2X</a> for a list of available solutions.</p>
<h3 id="other_resources">Other Resources<a class="headerlink" href="#other_resources" title="Permanent link">#</a></h3>
<ul>
<li><a href="sumo.html">sumo</a>'s TraCI Server is a part of the plain
  distribution. The source code is located in the folder
  <code>src/traci-server</code>.</li>
</ul>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">#</a></h2>
<ul>
<li>Axel Wegener, Michal Piorkowski, Maxim Raya, Horst Hellbrück, Stefan
  Fischer and Jean-Pierre Hubaux. TraCI: An Interface for Coupling Road
  Traffic and Network Simulators. Proceedings of the 11th
  Communications and Networking Simulation Symposium, April 2008.
  <a href="https://dl.acm.org/citation.cfm?doid=1400713.1400740">Available at ACM Digital Library</a></li>
<li>Axel Wegener, Horst Hellbrück, Christian Wewetzer and Andreas Lübke:
  VANET Simulation Environment with Feedback Loop and its Application
  to Traffic Light Assistance. Proceedings of the 3rd IEEE Workshop
  on Automotive Networking and Applications, New Orleans, LA, USA, 2008.
  <a href="https://doi.org/10.1109/GLOCOMW.2008.ECP.67">Available at IEEEXplore</a></li>
</ul>
<h2 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">#</a></h2>
<p>Using TraCI slows down the simulation speed. The amount of slow-down
depends on many factors:</p>
<ul>
<li>number of TraCI function calls per simulation step</li>
<li>types of TraCI functions being called (some being more expensive
  than others)</li>
<li>computation within the TraCI script</li>
<li>client language</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h3>
<p>As an example use-case consider retrieving the x,y position of each
vehicle during every simulation step (using the python client):</p>
<div class="codehilite"><pre><span></span><span class="k">while</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">getMinExpectedNumber</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">veh_id</span> <span class="ow">in</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getIDList</span><span class="p">():</span>
         <span class="n">position</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getPosition</span><span class="p">(</span><span class="n">veh_id</span><span class="p">)</span>
    <span class="n">traci</span><span class="o">.</span><span class="n">simulationStep</span><span class="p">()</span>
</pre></div>

<ul>
<li>This script is able to process about 25000 vehicles per second.</li>
<li>Using <a href="TraCI/Interfacing_TraCI_from_Python.html#embedded_python">embedded
  python</a>
  increases this to about 50000 vehicles per second</li>
<li>The same value retrieval can also be sped up to 50000 vehicles per
  second by using
  <a href="TraCI/Object_Variable_Subscription.html">subscriptions</a>:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="k">while</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">getMinExpectedNumber</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> 
    <span class="k">for</span> <span class="n">veh_id</span> <span class="ow">in</span> <span class="n">traci</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">getDepartedIDList</span><span class="p">():</span>
        <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">veh_id</span><span class="p">,</span> <span class="p">[</span><span class="n">traci</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">VAR_POSITION</span><span class="p">])</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="n">traci</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">getAllSubscriptionResults</span><span class="p">()</span>
    <span class="n">traci</span><span class="o">.</span><span class="n">simulationStep</span><span class="p">()</span>
</pre></div>

<p>When using this script on the <a href="Data/Scenarios.html#bologna">Bologna
scenario</a> (9000 vehicles, 5000
simulation steps) the following running times were recorded:</p>
<ul>
<li>without TraCI 8s</li>
<li>plain position retrieval 90s</li>
<li>retrieval using subscriptions 42s</li>
<li>retrieval using embedded python 46s</li>
<li>retrieval using subscriptions and embedded python 34s</li>
</ul>
<p>The C++ client performance is higher:</p>
<ul>
<li>plain position retrieval 80s</li>
<li>retrieval using subscriptions 28s</li>
</ul>
<h2 id="current_and_future_development">Current and Future Development<a class="headerlink" href="#current_and_future_development" title="Permanent link">#</a></h2>
<p>Historically TraCI used a different (single byte) command ID for every
domain (induction loops, vehicle etc.) where the more significant half
of the byte denotes the command (get, set, subscribe, ...) and the
lesser significant the domain itself. To allow more than the 16 domains
resulting from this split, the most significant bit (which was unused
until now because there were only 7 commands) is now used for the domain
as well (and only three for the command). This allows for 28 domains 
because four general commands (like SIMSTEP) block some available combinations.
Currently there are only four possible domains left.</p>
<p>Furthermore after the invention of libsumo
some parts of the TraCI interface are so generic that it may be not so
hard to invent a wrapper with Apache Kafka or Google protocol buffers
which could in the long run replace the need for all the byte fiddling 
and the different hand crafted clients.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">#</a></h2>
<h3 id="output_files_are_not_closed">Output files are not closed.<a class="headerlink" href="#output_files_are_not_closed" title="Permanent link">#</a></h3>
<p>This problem occurs if the client tries to access the output while
the simulation is still closing down. This can be solved by letting
the client wait for the simulation to shut down. The bug report was <a class="gh-link gh-issue" href="https://github.com/eclipse/sumo/issues/524" title="GitHub Issue eclipse/sumo #524">#524</a></p>
<h3 id="obsolete_apis">Obsolete APIs<a class="headerlink" href="#obsolete_apis" title="Permanent link">#</a></h3>
<p>There used to be two "generations" of <a href="TraCI.html">TraCI</a>
commands. The first one mainly uses an internal mapping between the
string-typed IDs used in <a href="sumo.html">sumo</a> and an external
representation of these which is int-based. The mapping was done
internally (within <a href="TraCI.html">TraCI</a>).
The second "generation", the current one uses string-IDs equal to
those <a href="sumo.html">sumo</a> reads. If you are bound to the first
generation API (for instance if you want to use TraNS) you can only
use <a href="sumo.html">sumo</a> up to version 0.12.3. See
<a href="FAQ.html">FAQ</a> about obtaining an old version.</p>
                </div>
          </div>
          <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa fa-arrow-up"></i></button>
        </div>

        <footer class="col-md-12">
          
            <br><small><i>This page was last edited on: 28 April 2021</i></small>
          
          <hr>
            <p>Copyright &copy; 2001-2021 German Aerospace Center (DLR) and others.</p>
          <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa fa-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa fa-facebook-square"></i></a> <a class="no-arrow-link" href="https://www.instagram.com/eclipse.sumo/"><i class="fa fa-instagram"></i></a>
          | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a></p>
        </footer>

      <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body" style="color: #495057 !important;">
                <p>Enter your search terms:</p>
                <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                <div class="gcse-search"></div>
            </div>
            <div class="modal-footer" style="color: #495057 !important;">
                or search the sumo-user mailing list archive&nbsp;<a class="no-arrow-link" href="http://sumo-user.90755.n8.nabble.com/template/NamlServlet.jtp?macro=search_page&node=1&query=">here</a>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};
        
        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }
    
        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }

        var base_url = ".",
            shortcuts = {"help": 191, "search": 83, "edit": 69};
        </script>
        <script src="js/base.js" defer></script>

        <script>
          const toggleSwitch = document.querySelector('#theme-switch input[type="checkbox"]');
  
          function switchTheme(e) {
              if (e.target.checked) {
                  localStorage.setItem('sumo-docs-theme', 'dark');
                  document.documentElement.setAttribute('data-theme', 'dark');
                  toggleSwitch.checked = true;
              } else {
                  localStorage.setItem('sumo-docs-theme', 'light');
                  document.documentElement.setAttribute('data-theme', 'light');
                  toggleSwitch.checked = false;
              }    
          }
  
          toggleSwitch.addEventListener('change', switchTheme, false);
  
          if (document.documentElement.getAttribute("data-theme") == "dark"){
              toggleSwitch.checked = true;
          }
          </script>

      <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody style="color: #495057 !important;">
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help dialog</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search the Documentation</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit current page on GitHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
    </body>
</html>
